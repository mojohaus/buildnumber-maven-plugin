<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/apt/usage.apt.vm at 2026-01-18
 | Rendered using Apache Maven Fluido Skin 2.1.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>Usage – Build Number Maven Plugin</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.1.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.1.0.min.js"></script>
    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
        _paq.push(['disableCookies']);
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);

        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'/matomo.php']);
            _paq.push(['setSiteId', '18']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
    <style>.github-fork-ribbon:before { background-color: gray; }</style>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/mojohaus/buildnumber-maven-plugin" data-ribbon="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1><a href="../"><img src="../images/mojo_logo.png" alt="MojoHaus" /></a></h1></div></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li><a href="../">MojoHaus</a><span class="divider">/</span></li>
      <li><a href="./">Build Number Maven Plugin</a><span class="divider">/</span></li>
    <li class="active">Usage <a href="https://github.com/mojohaus/buildnumber-maven-plugin/tree/master/src/site/apt/usage.apt.vm"><img src="./images/accessories-text-editor.png" alt="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2026-01-18</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 3.3.0</li>
        <li class="pull-right"><a href="https://maven.apache.org/">Maven</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html">Introduction</a></li>
    <li><a href="plugin-info.html">Goals</a></li>
    <li class="active"><a>Usage</a></li>
    <li><a href="faq.html">FAQ</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span10">
<section><a id="Usage"></a>
<h1>Usage</h1>
<p>This plugin works in one of 3 ways: with an SCM, with a sequential build number, or with a timestamp.</p>
<p>No matter which method you choose, you must include it in your pom:</p>
<pre class="prettyprint"><code>  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
        &lt;artifactId&gt;buildnumber-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.3.0&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;validate&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;create&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;configuration&gt;
          &lt;doCheck&gt;true&lt;/doCheck&gt;
          &lt;doUpdate&gt;true&lt;/doUpdate&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;</code></pre>
<p>This will cause the create goal of the buildNumber plugin to be executed during the validate phase. It will first check to see if you have locally modified files, and will fail if there are any. You can suppress this behaviour with <code>-Dmaven.buildNumber.doCheck=false</code> (or remove/change the configuration info).</p>
<p>The buildNumber plugin will then update your local repository. This is done because local revision might not be the same locally as the last one on some remote server (example for svn: 'svn info' grabs the revision out of your local repository, and is not necessarily the same as the revision in the remote repository). You should probably deal with these changes before creating a build in any case. Again, this behaviour can be suppressed with <code>-Dmaven.buildNumber.doUpdate=false</code>.</p>
<p>You then need to do something with the revision provided by the plugin. The revision number is available using <code>${buildNumber}</code> in your pom. For example:</p>
<pre class="prettyprint"><code>  &lt;build&gt;
    &lt;finalName&gt;$\{project.artifactId}-$\{project.version}-r$\{buildNumber}&lt;/finalName&gt;
  &lt;/build&gt;</code></pre>
<p>or to place in the manifest (META-INF/MANIFEST.mf) of your jar:</p>
<pre class="prettyprint"><code>  &lt;build&gt;
    ...
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.0.2&lt;/version&gt;
        &lt;configuration&gt;
          &lt;archive&gt;
            &lt;manifest&gt;
              &lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;
            &lt;/manifest&gt;
            &lt;manifestEntries&gt;
              &lt;Implementation-Build&gt;${buildNumber}&lt;/Implementation-Build&gt;
            &lt;/manifestEntries&gt;
          &lt;/archive&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;</code></pre>
<p>or war:</p>
<pre class="prettyprint"><code>  &lt;build&gt;
    ...
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.0.0&lt;/version&gt;
        &lt;configuration&gt;
          &lt;archive&gt;
            &lt;manifest&gt;
              &lt;addDefaultImplementationEntries&gt;true&lt;/addDefaultImplementationEntries&gt;
            &lt;/manifest&gt;
            &lt;manifestEntries&gt;
              &lt;Implementation-Build&gt;${buildNumber}&lt;/Implementation-Build&gt;
            &lt;/manifestEntries&gt;
          &lt;/archive&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;</code></pre>
<p>The <code>${scmBranch}</code> property is also populated to provide the SCM branch.</p>
<p><b>Note:</b> Older version of the jar and war plugin don't require the manifest/addDefaultImplementationEntries element, and in fact will fail if present. The new versions require this element.</p>
<p>You can also configure the plugin to be more flexible.</p>
<pre class="prettyprint"><code>  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
        &lt;artifactId&gt;buildnumber-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.3.0&lt;/version&gt;
        &lt;configuration&gt;
          &lt;format&gt;At {1,time} on {1,date}, there was {2} on planet {0,number,integer}.&lt;/format&gt;
          &lt;items&gt;
            &lt;item implementation=&quot;java.lang.Integer&quot;&gt;7&lt;/item&gt;
            &lt;item&gt;timestamp&lt;/item&gt;
            &lt;item&gt;a disturbance in the Force&lt;/item&gt;
          &lt;/items&gt;
        &lt;/configuration&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;validate&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;create&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;</code></pre>
<p>Other more useful configurations might be:</p>
<pre class="prettyprint"><code>    &lt;configuration&gt;
      &lt;format&gt;{0,number}.{1,number}.{2,number}&lt;/format&gt;
      &lt;items&gt;
        &lt;item&gt;buildNumber0&lt;/item&gt;
        &lt;item&gt;buildNumber1&lt;/item&gt;
        &lt;item&gt;buildNumber2&lt;/item&gt;
      &lt;/items&gt;
    &lt;/configuration&gt;</code></pre>
<p>or:</p>
<pre class="prettyprint"><code>    &lt;configuration&gt;
      &lt;format&gt;yyyy-MM-dd HH:mm:ss&lt;/format&gt;
      &lt;items&gt;
        &lt;item&gt;timestamp&lt;/item&gt;
      &lt;/items&gt;
    &lt;/configuration&gt;</code></pre>
<p>The plugin simply uses the <a class="externalLink" href="http://java.sun.com/j2se/1.4.2/docs/api/java/text/MessageFormat.html"> MessageFormat class</a> to produce <code>${buildNumber}</code>, and thus the above configurations would produce:</p>
<pre class="prettyprint"><code>    At 12:30 PM on Jul 3, 2053, there was a disturbance in the Force on planet 7.</code></pre>
<p>and</p>
<pre class="prettyprint"><code>    2.0.3</code></pre>
<p>and</p>
<pre class="prettyprint"><code>    2005-10-06 2:22:55</code></pre>
<p>respectively.</p>
<p>When you specify the special items of &quot;buildNumber\d*&quot; or &quot;timestamp&quot;, then some magic is performed. For each unique buildNumber, a properties file ( see <a href="./create-mojo.html#buildNumberPropertiesFileLocation">buildNumberPropertiesFileLocation</a> ) will be created (or read if it exists) which holds an integer, starting at 1. That number will be incremented on each access. Of course, the given example is somewhat non-sensical, since it will increment all 3 numbers on each build, but it shows the type of flexibility available. For each timestamp, you simply get the current date and time.</p>
<p>Here is some additional writeup on <a class="externalLink" href="http://apollo.ucalgary.ca/tlcprojectswiki/index.php/Public/Project_Versioning_-_Best_Practices#Build_Versioning"> how to version your projects with this plugin</a>. It even details how to access the version number in your code.</p><section><a id="Git_short_revision_ID"></a>
<h2>Git short revision ID</h2>
<p>From the version 1.1 you can specify the length for the Git revision. To enable this feature you have to specify the new tag <b> &lt;shortRevisionLength&gt; </b> in the <b> &lt;configuration&gt; </b> section. For exemple:</p>
<pre class="prettyprint"><code>    &lt;configuration&gt;
       &lt;shortRevisionLength&gt;5&lt;/shortRevisionLength&gt;
    &lt;/configuration&gt;</code></pre>
<p>the output of the found git revision will have only 5 characters:</p>
<pre class="prettyprint"><code>    instead of b0c1c69be579175e63eeb1c056d607f01ab61e96 you will have only b0c1c</code></pre>
<p><b>Note:</b> this feature uses internally the <b>git rev-parse --short</b> command and the revision length is set to minimum 4 characters. So you can't have the revision id shorter then 4 characters. Even if you specify the length between 0 and 4, the plugin will inform you about this situation and the minimum value (4) will be used.</p></section><section><a id="Using_svnjava_provider"></a>
<h2>Using svnjava provider</h2>
<p>If you need to execute the plugin on machine without any svn in the path you can configure the mojo to use the svnjava provider.</p>
<p>NOTE the svnjava provider use the svnjava scm provider implementation <a class="externalLink" href="https://github.com/olamy/maven-scm-provider-svnjava">maven-scm-provider-svnjava</a> which rely on svnkit version.</p>
<pre class="prettyprint"><code>  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
        &lt;artifactId&gt;buildnumber-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.3.0&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;validate&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;create&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;configuration&gt;
          &lt;doCheck&gt;true&lt;/doCheck&gt;
          &lt;doUpdate&gt;true&lt;/doUpdate&gt;
          &lt;providerImplementations&gt;
            &lt;svn&gt;javasvn&lt;/svn&gt;
          &lt;/providerImplementations&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;</code></pre></section><section><a id="Using_Perforce_P4Maven_provider"></a>
<h2>Using Perforce P4Maven provider</h2>
<p>To use this plugin with <a class="externalLink" href="https://swarm.workshop.perforce.com/files/guest/dantran/p4maven">Perforce P4Maven Provider</a>, add p4maven-provider to dependencies list.</p>
<pre class="prettyprint"><code>  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
        &lt;artifactId&gt;buildnumber-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.3.0&lt;/version&gt;
        &lt;dependencies&gt;
          &lt;dependency&gt;
            &lt;groupId&gt;com.perforce.p4maven&lt;/groupId&gt;
            &lt;artifactId&gt;p4maven-provider&lt;/artifactId&gt;
            &lt;version&gt;${p4maven.version}&lt;/version&gt;
          &lt;/dependency&gt;
        &lt;/dependencies&gt;
        [...]
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;</code></pre></section><section><a id="Create_Build_Metadata"></a>
<h2>Create Build Metadata</h2>
<p>For quick quick discovery of a SCM revision of an snapshot/release artifact available at maven repository, use buildnumber:create-metadata to deploy a build metadata file associate with a specific artifact of the same project.</p>
<pre class="prettyprint"><code>  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
        &lt;artifactId&gt;buildnumber-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;3.3.0&lt;/version&gt;
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;phase&gt;generate-resources&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;create-metadata&lt;/goal&gt;
            &lt;/goals&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        &lt;configuration&gt;
          &lt;attach&gt;true&lt;/attach&gt;
          &lt;!--make it available for jar/war classpath resource --&gt;
          &lt;addOutputDirectoryToResources&gt;true&lt;/addOutputDirectoryToResources&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;</code></pre></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2007–2026
<a href="https://www.mojohaus.org">MojoHaus</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>